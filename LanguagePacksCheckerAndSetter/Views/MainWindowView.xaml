<!--<Window x:Class="LanguagePacksCheckerAndSetter.Views.MainWindowView"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:vm="clr-namespace:LanguagePacksCheckerAndSetter.ViewModels"
        xmlns:views="clr-namespace:LanguagePacksCheckerAndSetter.Views"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:utils="clr-namespace:LanguagePacksCheckerAndSetter.Utilities"
        xmlns:local="clr-namespace:LanguagePacksCheckerAndSetter"
        mc:Ignorable="d"
        Title="Language Packs Checker and Installer" Height="600" Width="900"
        WindowStartupLocation="CenterScreen">

    <Window.Resources>
        <utils:InverseBooleanConverter x:Key="InverseBooleanConverter"/>
    </Window.Resources>

    <Window.DataContext>
        <vm:MainWindowViewModel/>
    </Window.DataContext>

    <Grid>
        <TabControl SelectedIndex="{Binding SelectedTabIndex}"
            IsEnabled="{Binding IsBusy, Converter={StaticResource InverseBooleanConverter}}">
            <TabItem Header="Install">
                <views:InstallView/>
            </TabItem>
            <TabItem Header="Check">
                <views:CheckView/>
            </TabItem>
            <TabItem Header="Delete">
                <views:DeleteView/>
            </TabItem>
            <TabItem Header="Refresh Language Settings">
                <views:RefreshLanguageView/>
            </TabItem>
            <TabItem Header=".NET 3.5 Features">
                <views:EnableDotNetFeaturesView/>
            </TabItem>
        </TabControl>
    </Grid>
</Window>-->

<Window x:Class="LanguagePacksCheckerAndSetter.Views.MainWindowView"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:vm="clr-namespace:LanguagePacksCheckerAndSetter.ViewModels"
        xmlns:views="clr-namespace:LanguagePacksCheckerAndSetter.Views"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:utils="clr-namespace:LanguagePacksCheckerAndSetter.Utilities"
        xmlns:local="clr-namespace:LanguagePacksCheckerAndSetter"
        mc:Ignorable="d"
        Title="Language Packs Checker and Installer"
        Height="600" Width="900"
        WindowStartupLocation="CenterScreen">

    <Window.Resources>
        <!-- Inverse bool for IsEnabled on TabControl -->
        <utils:InverseBooleanConverter x:Key="InverseBooleanConverter" />

        <!-- Subtle accent style for the Restart button so it’s clearly “a button” and not a tab -->
        <Style x:Key="AccentButton" TargetType="Button">
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="Background" Value="#0078D4"/>
            <!-- Primary -->
            <Setter Property="BorderBrush" Value="#005A9E"/>
            <!-- Darker border -->
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Padding" Value="16,4"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="SnapsToDevicePixels" Value="True"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="border"
                                CornerRadius="4"
                                Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}">
                            <ContentPresenter
                                HorizontalAlignment="Center"
                                VerticalAlignment="Center"
                                RecognizesAccessKey="True"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="border" Property="Background" Value="#1083D6"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter TargetName="border" Property="Background" Value="#0B5CAD"/>
                            </Trigger>
                            <Trigger Property="IsEnabled" Value="False">
                                <Setter TargetName="border" Property="Opacity" Value="0.55"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- TabControl template that places a right-aligned Restart button on the same header row as the tabs -->
        <Style x:Key="TabControlWithRightButton" TargetType="{x:Type TabControl}">
            <Setter Property="BorderBrush" Value="#D6D6D6"/>
            <Setter Property="Background" Value="{DynamicResource {x:Static SystemColors.ControlBrushKey}}"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type TabControl}">
                        <Grid SnapsToDevicePixels="True">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="*"/>
                            </Grid.RowDefinitions>

                            <!-- Header row: Tabs (left) | Separator | Restart button (right) -->
                            <Grid Grid.Row="0">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition/>
                                    <!-- headers stretch -->
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>

                                <!-- Tab headers -->
                                <TabPanel x:Name="HeaderPanel"
                                          Grid.Column="0"
                                          IsItemsHost="True"
                                          Margin="0,0,8,0" />

                                <!-- Visual separation between tabs and button -->
                                <Separator Grid.Column="1"
                                           Margin="0,4"
                                           VerticalAlignment="Stretch"
                                           Width="1"
                                           Opacity="0.5"
                                           Background="#D6D6D6"
                                           SnapsToDevicePixels="True"/>

                                <!-- Restart button (distinct from tabs) -->
                                <Button Grid.Column="2"
                                        Content="Restart PC"
                                        Command="{Binding RestartCommand}"
                                        ToolTip="Restart the computer"
                                        VerticalAlignment="Stretch"
                                        Margin="0,0,0,0"
                                        Style="{StaticResource AccentButton}"/>
                            </Grid>

                            <!-- Content presenter -->
                            <Border Grid.Row="1"
                                    BorderBrush="{TemplateBinding BorderBrush}"
                                    BorderThickness="1"
                                    Padding="8">
                                <ContentPresenter x:Name="PART_SelectedContentHost"
                                                  ContentSource="SelectedContent"
                                                  SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}"/>
                            </Border>
                        </Grid>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>

    <Window.DataContext>
        <vm:MainWindowViewModel/>
    </Window.DataContext>

    <Grid>
        <TabControl
            SelectedIndex="{Binding SelectedTabIndex}"
            IsEnabled="{Binding IsBusy, Converter={StaticResource InverseBooleanConverter}}"
            Style="{StaticResource TabControlWithRightButton}"
            TabStripPlacement="Top"
            Margin="0,5,0,0">

            <TabItem Header="Install">
                <views:InstallView/>
            </TabItem>

            <TabItem Header="Check">
                <views:CheckView/>
            </TabItem>

            <TabItem Header="Delete">
                <views:DeleteView/>
            </TabItem>

            <TabItem Header="Refresh Language Settings">
                <views:RefreshLanguageView/>
            </TabItem>

            <TabItem Header=".NET 3.5 Features">
                <views:EnableDotNetFeaturesView/>
            </TabItem>
        </TabControl>
    </Grid>
</Window>